"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["4276"],{9123:function(e,r,n){n.r(r),n.d(r,{default:()=>i});var s=n(2676),a=n(453);function t(e){let r=Object.assign({h1:"h1",a:"a",h2:"h2",h3:"h3",pre:"pre",code:"code",p:"p"},(0,a.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.h1,{id:"websocket通信",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#websocket通信",children:"#"}),"websocket通信"]}),"\n",(0,s.jsxs)(r.h2,{id:"1-资源更新页面",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#1-资源更新页面",children:"#"}),"1. 资源更新页面"]}),"\n",(0,s.jsxs)(r.h3,{id:"11-选择资源",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#11-选择资源",children:"#"}),"1.1 选择资源"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",meta:"title=# example {1,9}",children:'  // send to software\r\n  {\r\n    "code": "SELECT_ZY",            // 指令编码常量，设计软件根据code执行对应逻辑\r\n    "param": {                      \r\n      "zyId": "select_zyId"             // 传参： 双击选中的资源\r\n    }\r\n  }\r\n\r\n  // send to web\r\n  {\r\n    "status": true,\r\n    "code": "SELECT_ZY",\r\n    "message": "string",\r\n    "data": null\r\n  }\n'})}),"\n",(0,s.jsxs)(r.h3,{id:"12-更新资源",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#12-更新资源",children:"#"}),"1.2 更新资源"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",meta:"title=# example {1,9}",children:'  // send to software\r\n  {\r\n    "code": "UPDATE_COMPONENT_RESOURCE",\r\n    "param": {\r\n      zyId: "string",\r\n      ids: "string"\r\n    }\r\n  }\r\n  // send to web\r\n  {\r\n    "status": true,                       // 更新结果 true: 成功 false: 失败\r\n    "code": "UPDATE_COMPONENT_RESOURCE",\r\n    "message": "error message",           // 页面中会提示信息\r\n    "data": null                          // 不需要返回值                    \r\n  }\n'})}),"\n",(0,s.jsxs)(r.h2,{id:"2-wcc",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#2-wcc",children:"#"}),"2. WCC"]}),"\n",(0,s.jsxs)(r.h3,{id:"21-同步wcc数据",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#21-同步wcc数据",children:"#"}),"2.1 同步wcc数据"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",meta:"",children:'  code = "SYNC_DATA_WCC"\n'})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",meta:"title=# example {1,21}",children:'  // send to HomeDesign\r\n  {\r\n    "code": "SYNC_DATA_WCC",\r\n    "param": {\r\n      "name": string,\r\n      "id":   string,\r\n      "items": [\r\n        {\r\n          "Name":         string,           // 参数名称\r\n          "Value":        string | number,  // 参数值\r\n          "Descrip":      string,           // 参数描述\r\n          "Slave":        string,           // 参数表达式\r\n          "Type":         number,           // 参数类型 0: Double, 1：文本，2：布尔 3：整型\r\n          "OutputFalg":   boolean,          // 在输出值的情况下 是否输出\r\n          "OutputSlave":  string,           // 输出表达式（优先级高于输出值）\r\n        },\r\n        ...\r\n      ]\r\n    }\r\n  }\r\n  // response to web\r\n  {\r\n    "status": true,                       // 更新结果 true: 成功 false: 失败\r\n    "code": "SYNC_DATA_WCC",\r\n    "message": "error message",           // 页面中会提示信息\r\n    "data": null                          // 不需要返回值                    \r\n  }\n'})}),"\n",(0,s.jsxs)(r.h2,{id:"3-约束设置",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#3-约束设置",children:"#"}),"3. 约束设置"]}),"\n",(0,s.jsxs)(r.h3,{id:"31-同步约束数据",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#31-同步约束数据",children:"#"}),"3.1 同步约束数据"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",meta:"title=# example {1,25}",children:'  // send to HomeDesign\r\n  {\r\n    "code": "SYNC_DATA_CONSTRAINT",\r\n    "param": {\r\n      "name": string,\r\n      "code": string,\r\n      "items": [\r\n        {\r\n          "id":       string,       // 约束ID\r\n          "desc":     string,       // 约束说明\r\n          "express":  string,       // 约束表达式\r\n          "level":    number,       // 报错级别 - 0: 工艺报错  1：工艺警告  2：工艺审批\r\n          "expandInfo": [           // 扩展信息 - 报价相关信息也填写到扩展信息中， 报价：type=quote\r\n            { \r\n              "type":   string, \r\n              "value":  string \r\n            },\r\n            ...\r\n          ]\r\n        },\r\n        ...\r\n      ]\r\n    }\r\n  }\r\n// send to web\r\n  {\r\n    "status": true,                  // 更新结果 true: 成功 false: 失败\r\n    "code": "SYNC_DATA_CONSTRAINT",\r\n    "message": "error message",      // 页面中会提示信息\r\n    "data": null                     // 不需要返回值                    \r\n  }\r\n\n'})}),"\n",(0,s.jsxs)(r.h2,{id:"4-参数导入",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#4-参数导入",children:"#"}),"4. 参数导入"]}),"\n",(0,s.jsxs)(r.p,{children:["此结构通用参数导入功能，只有 ",(0,s.jsx)(r.code,{children:"code"})," 字段和 ",(0,s.jsx)(r.code,{children:"items"})," 字段的值会因为配置而不同。"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",meta:"title=# example {1,10}",children:'  // send to HomeDesign\r\n  {\r\n    "code": "SYNC_DATA_{CONFIG}",    \r\n    "param": {\r\n      "name": string,\r\n      "code": string,\r\n      "items": [...]\r\n    }\r\n  }\r\n// send to web\r\n  {\r\n    "status": true,                  // 更新结果 true: 成功 false: 失败\r\n    "code": "SYNC_DATA_{CONFIG}",\r\n    "message": "error message",      // 页面中会提示信息\r\n    "data": null                     // 不需要返回值                    \r\n  }\r\n\n'})}),"\n",(0,s.jsxs)(r.h3,{id:"41-配置参数设置",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#41-配置参数设置",children:"#"}),"4.1 配置：参数设置"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"参数设置"})," 数据结构"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",meta:"title=code",children:'  code = "SYNC_DATA_PARAMS"\n'})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",meta:"title=items ",children:'  [{\r\n    "baseSetting": {     // 基本设置\r\n      "name": string,       // 名称\r\n      "useto": string,      // 用途\r\n      "desc": string,       // 描述\r\n      "type":  1 | 2 | 3 | 4,   // 类型 - 1：数值 2：文本 3：布尔 4：整型\r\n      "remark": string      // 备注\r\n    }\r\n\r\n    "valueSetting": {                       // 值设置\r\n      "value": string | number,               //  值-值\r\n      "value_express": string,                //  值-表达式\r\n      "value_type": \'value\' | \'express\',      //  值类型 - value: 值, express: 表达式\r\n      "min_value": number,                    //  最小值-值\r\n      "min_express": string,                  //  最小值-表达式\r\n      "min_type": \'value\' | \'express\',        //  最小值类型 - value: 值, express: 表达式\r\n      "max_value": number,                    //  最大值-值\r\n      "max_express": string,                  //  最大值-表达式\r\n      "max_type": \'value\' | \'express\',        //  最大值类型 - value: 值, express: 表达式\r\n      "f_display_value": boolean,             //  前端显示-值\r\n      "f_display_express": string,            //  前端显示-表达式\r\n      "f_display_type": \'value\' | \'express\',  //  前端显示类型 - value: 值, express: 表达式\r\n      "refresh_express": string,              //  刷新条件表达式\r\n      "f_readonly": boolean                   //  前端只读 \r\n    },\r\n\r\n    "seriesValue": {                  // 系列值\r\n      "is_display": boolean,            // 前端是否显示 \r\n      "is_series": boolean,             // 是否为系列值\r\n      "series": [                     // ---系列值\r\n        {                           \r\n          "value": string,              //  选项值\r\n          "is_display": boolean,        //  前端是否显示\r\n          "display_value": string,      //  前端显示值\r\n          "express": string,            //  表达式\r\n          "remark": string              //  备注\r\n        }, ...]\r\n\r\n      "use": \'required\' | \'priority\',   //   优选/必选 - required: 必选， priority： 必选\r\n      "express": string                 //  表达式\r\n    },\r\n    // 高级\r\n    "advanced": {                       \r\n      "is_mulit_rows": boolean,  // 多行显示\r\n      "update_option": \'not_value\' | \'value\'  //  更新选项 not_value: 不更新值, value: 更新值\r\n    }\r\n  }, ...]\n'})})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,a.ah)(),e.components);return r?(0,s.jsx)(r,Object.assign({},e,{children:(0,s.jsx)(t,e)})):t(e)}let i=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["guide%2Fother%2Fwebsocket%E9%80%9A%E4%BF%A1.md"]={toc:[{id:"1-资源更新页面",text:"1. 资源更新页面",depth:2},{id:"11-选择资源",text:"1.1 选择资源",depth:3},{id:"12-更新资源",text:"1.2 更新资源",depth:3},{id:"2-wcc",text:"2. WCC",depth:2},{id:"21-同步wcc数据",text:"2.1 同步wcc数据",depth:3},{id:"3-约束设置",text:"3. 约束设置",depth:2},{id:"31-同步约束数据",text:"3.1 同步约束数据",depth:3},{id:"4-参数导入",text:"4. 参数导入",depth:2},{id:"41-配置参数设置",text:"4.1 配置：参数设置",depth:3}],title:"websocket通信",headingTitle:"websocket通信",frontmatter:{}}}}]);