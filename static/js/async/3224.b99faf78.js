"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["3224"],{4669:function(e,n,r){r.r(n),r.d(n,{default:()=>p});var i=r("2676"),s=r("453"),c=r("1305");let d=r.p+"static/image/image.8b8164d3.png",a=r.p+"static/image/createConfLib.9f86b92f.jpg",l=r.p+"static/image/createConfig.e50ec93a.jpg",h=r.p+"static/image/createConfig2.62a635a3.jpg",t=r.p+"static/image/importConfig.27fb99da.jpg",j=r.p+"static/image/uploadFile1.f372c164.jpg",x=r.p+"static/image/uploadFile.54e39a11.jpg";function o(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",img:"img",ol:"ol",li:"li",h3:"h3",code:"code",ul:"ul",pre:"pre",div:"div",h4:"h4",strong:"strong"},(0,s.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"配置库说明",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置库说明",children:"#"}),"配置库说明"]}),"\n",(0,i.jsxs)(n.h2,{id:"概要",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#概要",children:"#"}),"概要"]}),"\n",(0,i.jsx)(n.p,{children:"统一配置管理"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:d})}),"\n",(0,i.jsxs)(n.h2,{id:"流程",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#流程",children:"#"}),"流程"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"创建配置库"}),"\n",(0,i.jsx)(n.li,{children:"创建配置"}),"\n",(0,i.jsx)(n.li,{children:"导入配置"}),"\n",(0,i.jsx)(n.li,{children:"配置管理\r\n- 文件上传\r\n- 文件编辑\r\n- 配置发布"}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"1-创建配置库",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1-创建配置库",children:"#"}),"1. 创建配置库"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:a})}),"\n",(0,i.jsxs)(n.h3,{id:"2-创建配置",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2-创建配置",children:"#"}),"2. 创建配置"]}),"\n",(0,i.jsxs)(n.p,{children:["只有 ",(0,i.jsx)(n.code,{children:"DefCatalog"}),"默认配置库可以创建配置，其他配置库只能导入配置"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:l})}),"\n",(0,i.jsx)(n.p,{children:"从已有的配置中选择配置，配置名称和ID不需要填写，会从选择的配置中带出"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:h})}),"\n",(0,i.jsxs)(n.h3,{id:"3-导入配置",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#3-导入配置",children:"#"}),"3. 导入配置"]}),"\n",(0,i.jsx)(n.p,{children:"将其他库的配置导入到当前库，（此操作为配置的复制，导入后的修改不影响原来的配置）"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:t})}),"\n",(0,i.jsxs)(n.h3,{id:"4-配置管理",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#4-配置管理",children:"#"}),"4. 配置管理"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"配置文件管理"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{meta:"",children:"配置下所有的文件都会在这里显示，可以上传和删除\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:j})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:x})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"文件编辑"}),"\n",(0,i.jsx)(n.p,{children:"目前不知道会有多少种配置文件及数据格式，只实现wcc配置编辑和材质表编辑"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"wcc编辑"}),"\n",(0,i.jsx)(n.p,{children:"左侧目录对wcc配置文件分类管理"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{meta:"",children:"![image](./assets/wcc_tree1.jpg)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"说明"}),(0,i.jsx)(n.div,{className:"rspress-directive-content",children:(0,i.jsx)(n.p,{children:"\n1. 只有在目录下才可以新建，如果目录为空则可以新建参数表和目录，如果目录不为空则目录下一级都为目录或参数表\r\n2. 参数表的code为软件端下载的文件名"})})]}),"\n",(0,i.jsxs)(n.h2,{id:"相关规则",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#相关规则",children:"#"}),"相关规则"]}),"\n",(0,i.jsxs)(n.h3,{id:"材质业务表",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#材质业务表",children:"#"}),"材质业务表"]}),"\n",(0,i.jsxs)(n.h4,{id:"1-表达式规则",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1-表达式规则",children:"#"}),"1. 表达式规则"]}),"\n",(0,i.jsxs)(n.p,{children:["渠道组表示：在一个或多个渠道下，在什么条件下结果是什么值。例：{",(0,i.jsx)(n.code,{children:"渠道"})," # ",(0,i.jsx)(n.code,{children:"值?条件"})," ; ",(0,i.jsx)(n.code,{children:"值?条件"}),"}"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"一个或多个渠道值为一个渠道组，"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"{}"}),": 包裹每个渠道组。"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@"})," : 连接渠道组中多个渠道值。"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"#"})," : 分割渠道与值?条件"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:";"})," : 连接多个值?条件"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"?"})," : 值?条件"]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"渠道组"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:"",children:"  '{渠道值@渠道值2#值?条件;值?条件}{剩余渠道#值?条件}'\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:"title=#example",children:"// 在渠道79中和61，条件为condition时，值为value，\r\n// 其他渠道下值为value1\r\n'{product_channel_79@product_channel_61#value?condition}{剩余渠道#value1}'\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"全部渠道"}),"\n",(0,i.jsx)(n.p,{children:"只有值的情况，仅字符串"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:"",children:"  'value'\n"})}),"\n",(0,i.jsx)(n.p,{children:"多个条件的情况"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:"",children:"'{剩余渠道#值?条件;值?条件}'\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"渲染水印",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#渲染水印",children:"#"}),"渲染水印"]}),"\n",(0,i.jsxs)(n.h4,{id:"无配置库时",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#无配置库时",children:"#"}),"无配置库时"]}),"\n",(0,i.jsxs)(n.p,{children:["设计软件会下载 ",(0,i.jsx)(n.strong,{children:"channelCode.xml配置文件 + logo图片"})," 的压缩包，xml文件及logo图根据后台管理中租户渠道配置生成。\r\n设计软件根据xml文件中的 ",(0,i.jsx)(n.strong,{children:"渠道ID + LOGO名称"})," 获取logo图。"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",meta:"title=channelCode.xml 配置文件",children:'<HDChannelLogoInfo>\r\n  <Item ID="210" NAME="miform木门miform零售" LOGO="miform"/>\r\n  <Item ID="167" NAME="欧派橱柜集成厨房" LOGO="欧派"/>\r\n  <Item ID="70" NAME="欧铂丽木门整装" LOGO="欧铂丽"/>\r\n</HDChannelLogoInfo>\n'})}),"\n",(0,i.jsxs)(n.h4,{id:"改为配置库后",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#改为配置库后",children:"#"}),"改为配置库后"]}),"\n","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"前端提供json文件，供后端生成压缩包zip"}),"\n"]}),"\n",(0,i.jsx)(c.Z,Object.assign({code:"classDiagram\r\n    direction LR\r\n    class 目前后端生成的压缩包zip {\r\n      miform高清.jpg\r\n      miform超清.jpg\r\n      miform4K.jpg\r\n      ....jpg\r\n      channelCode.xml(配置文件)\r\n    }\r\n    class 配置库生成的压缩包zip{\r\n      miform高清.jpg\r\n      miform超清.jpg\r\n      miform4K.jpg\r\n      ....jpg\r\n      channelCode.json(配置文件)\r\n    }\r\n    目前后端生成的压缩包zip  --\x3e  配置库生成的压缩包zip : 前端提供logo配置文件，后端根据json生成"},{config:{theme:"dark"}})),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"配置文件说明"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"配置库中保存的配置文件不会直接发送给软件使用，经过转换后两端文件会有差异。"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"软件中配置文件，至少包含ID、NAME、LOGO字段"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",meta:"title=channelCode.json",children:'{\r\n  ID: "210",\r\n  NAME: "miform木门miform零售",\r\n  LOGO: "miform"\r\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"配置库中配置文件"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"ID、NAME、LOGO对应xml中相同字段，url地址为四个清晰度的图片地址，下划线 _ 开头的字段只在配置库页面中使用"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",meta:"title=waterMark.json",children:'[\r\n  {\r\n    "ID": "210",                            // 渠道值末尾数字\r\n    "NAME": "miform木门miform零售",          // 品牌 + 品类 + 渠道名  \r\n    "LOGO": "miform",                       // 水印名称 \r\n    "logoUrl4K": "https://uatcdn.jiajutech.com/jiaju/ability/image/995b1e03-91a8-43ff-976f-c3471bd2bfe7.png",\r\n    "logoUrlFHD": "https://uatcdn.jiajutech.com/jiaju/ability/image/181b0d3a-c7ff-4d9c-949d-3c963071b348.png",\r\n    "logoUrlHD": "https://uatcdn.jiajutech.com/jiaju/ability/image/739256ec-a1c8-4e7a-bdb0-8308373260c2.png",\r\n    "logoUrlSD": "https://uatcdn.jiajutech.com/jiaju/ability/image/ec5095dc-4d56-42c2-9c8a-abab453c0a2a.png",\r\n    // 以下字段只在配置库中用到\r\n    "_brandLogoCode": "",                   // 水印code\r\n    "_brand": "miform",                     // 品牌\r\n    "_category": "衣柜",                    // 品类\r\n    "_channelName": "整装大家居",            // 渠道名 \r\n    "_channelCode": "product_channel_210"   // 渠道值\r\n  }, \r\n  ...\r\n]\n'})})]})}function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,i.jsx)(n,Object.assign({},e,{children:(0,i.jsx)(o,e)})):o(e)}let p=m;m.__RSPRESS_PAGE_META={},m.__RSPRESS_PAGE_META["guide%2Fadmin%2FconfigLib%2F%E9%85%8D%E7%BD%AE%E5%BA%93%E8%AF%B4%E6%98%8E.md"]={toc:[{id:"概要",text:"概要",depth:2},{id:"流程",text:"流程",depth:2},{id:"1-创建配置库",text:"1. 创建配置库",depth:3},{id:"2-创建配置",text:"2. 创建配置",depth:3},{id:"3-导入配置",text:"3. 导入配置",depth:3},{id:"4-配置管理",text:"4. 配置管理",depth:3},{id:"相关规则",text:"相关规则",depth:2},{id:"材质业务表",text:"材质业务表",depth:3},{id:"1-表达式规则",text:"1. 表达式规则",depth:4},{id:"渲染水印",text:"渲染水印",depth:3},{id:"无配置库时",text:"无配置库时",depth:4},{id:"改为配置库后",text:"改为配置库后",depth:4}],title:"配置库说明",headingTitle:"配置库说明",frontmatter:{}}}}]);